<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–í–æ–π—Ç–∏ | L-U-N-E-V</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/main.css">
</head>
<body>

<header class="header">
  <div class="header-container">
    <div class="header-left">
      <a href="index.html" class="logo">
        <img src="images/logo1.png" alt="L-U-N-E-V" class="logo-img">
      </a>
    </div>
    <div class="header-right">
      <nav class="nav" id="header-nav">
        <a href="favorites.html">‚ù§Ô∏è –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</a>
        <a href="cart.html">üõí –ö–æ—Ä–∑–∏–Ω–∞</a>
        <a href="login.html" id="login-link">üë§ –í–æ–π—Ç–∏</a>
      </nav>
    </div>
  </div>
</header>

<div class="auth-container">
  <h2>–í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç</h2>
  <form id="login-form" class="auth-form">
    <div class="form-group">
      <input type="email" placeholder="–í–∞—à email" id="email" required>
      <div class="form-error" id="emailError"></div>
    </div>
    <div class="form-group">
      <input type="password" placeholder="–í–∞—à –ø–∞—Ä–æ–ª—å" id="password" required>
      <div class="form-error" id="passwordError"></div>
    </div>
    <button type="submit" class="auth-button" id="submitBtn">
      <span class="btn-text">–í–æ–π—Ç–∏</span>
      <span class="btn-loading">–í—Ö–æ–¥...</span>
    </button>
  </form>
  <p class="auth-link">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="register.html">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>
</div>

<footer class="footer">
  <div class="footer-content">
    <div class="footer-section">
      <h3>L-U-N-E-V</h3>
      <p>–ë—É–¥—É—â–µ–µ –ó–¥–µ—Å—å –∏ –°–µ–π—á–∞—Å. –°–∞–º—ã–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –≥–∞–¥–∂–µ—Ç—ã –¥–ª—è –≤–∞—à–µ–≥–æ –∫–æ–º—Ñ–æ—Ä—Ç–∞.</p>
      <div class="social-links">
        <a href="#"> VK</a>
        <a href="#"> Telegram</a>
        <a href="#"> Twitter</a>
        <a href="#"> YouTube</a>
      </div>
    </div>
    
    <div class="footer-section">
      <h4>–ú–∞–≥–∞–∑–∏–Ω</h4>
      <ul>
        <li><a href="product-telephone.html">–°–º–∞—Ä—Ç—Ñ–æ–Ω—ã</a></li>
        <li><a href="product-consoles.html">–ò–≥—Ä–æ–≤—ã–µ –∫–æ–Ω—Å–æ–ª–∏</a></li>
        <li><a href="product-headphone.html">–ù–∞—É—à–Ω–∏–∫–∏</a></li>
        <li><a href="product-port-consoles.html">–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–Ω—Å–æ–ª–∏</a></li>
        <li><a href="product-washmashine.html">–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞</a></li>
      </ul>
    </div>
    
    <div class="footer-section">
      <h4>–ü–æ–º–æ—â—å</h4>
      <ul>
        <li><a href="https://i.ytimg.com/vi/yCe2NeTzB8A/hqdefault.jpg">–¶–µ–Ω—Ç—Ä –ø–æ–¥–¥–µ—Ä–∂–∫–∏</a></li>
        <li><a href="https://i.ytimg.com/vi/yCe2NeTzB8A/hqdefault.jpg">–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞</a></li>
        <li><a href="https://i.ytimg.com/vi/yCe2NeTzB8A/hqdefault.jpg">–ì–∞—Ä–∞–Ω—Ç–∏—è –∏ –≤–æ–∑–≤—Ä–∞—Ç</a></li>
        <li><a href="https://i.ytimg.com/vi/yCe2NeTzB8A/hqdefault.jpg">–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</a></li>
        <li><a href="https://i.ytimg.com/vi/yCe2NeTzB8A/hqdefault.jpg">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
      </ul>
    </div>
    
    <div class="footer-section">
      <h4>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
      <div class="contact-info">
        <p>üìß Email: MR.ANDREW.BRAUNI@mamamia.ru</p>
        <p>üìû –¢–µ–ª–µ—Ñ–æ–Ω: +7 (914) 123-4-88</p>
        <p>üïí –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 9:00-21:00</p>
        <p>üìç –ê–¥—Ä–µ—Å: –≥. –£–¥–æ–º–ª—è, —É–ª. –ö–æ—Å–º–æ–Ω–∞–≤—Ç–æ–≤, 42</p>
      </div>
    </div>
    
    <div class="footer-section">
      <h4>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h4>
      <div class="security-badges">
        <div>üîí –ó–∞—â–∏—Ç–∞ –µ—Å—Ç—å - –∫–ª—è–Ω—É—Å—å</div>
        <div>üí≥ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ - –º–æ–∂–Ω–æ –∞–≤—à–æ—Ä–∞–º–∏</div>
        <div>üì¶ –ì–∞—Ä–∞–Ω—Ç–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ - 2 –Ω–µ–¥–µ–ª–∏</div>
      </div>
    </div>
  </div>
  
  <div class="footer-bottom">
    <p>¬© 2025 L-U-N-E-V. –ë—É–¥—É—â–µ–µ –ó–¥–µ—Å—å –∏ –°–µ–π—á–∞—Å. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    <div class="footer-links">
      <a href="https://avatars.mds.yandex.net/i?id=5958f7da9a5751737dc064ecf01deaf7_l-9220416-images-thumbs&n=13">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
      <a href="https://i.ytimg.com/vi/NoAg0ucx-DI/hqdefault.jpg">–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a>
      <a href="https://i.ytimg.com/vi/gedsONT744o/maxresdefault.jpg">Cookies</a>
    </div>
  </div>
</footer>

<script>
// –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
function showNotification(message, type = 'error') {
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  notification.textContent = message;
  document.body.appendChild(notification);
  
  setTimeout(() => notification.classList.add('show'), 100);
  
  setTimeout(() => {
    notification.classList.remove('show');
    setTimeout(() => notification.remove(), 300);
  }, 5000);
}

// –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É –ø–æ–ª—è
function showFieldError(fieldId, message) {
  const field = document.getElementById(fieldId);
  const errorElement = document.getElementById(fieldId + 'Error');
  
  if (field && errorElement) {
    field.classList.add('error');
    errorElement.textContent = message;
    errorElement.style.display = 'block';
  }
}

// –°–∫—Ä—ã—Ç—å –æ—à–∏–±–∫—É –ø–æ–ª—è
function hideFieldError(fieldId) {
  const field = document.getElementById(fieldId);
  const errorElement = document.getElementById(fieldId + 'Error');
  
  if (field && errorElement) {
    field.classList.remove('error');
    errorElement.style.display = 'none';
  }
}

// –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
function showLoading() {
  const submitBtn = document.getElementById('submitBtn');
  const btnText = submitBtn.querySelector('.btn-text');
  const btnLoading = submitBtn.querySelector('.btn-loading');
  
  submitBtn.disabled = true;
  btnText.style.display = 'none';
  btnLoading.style.display = 'inline';
}

// –°–∫—Ä—ã—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
function hideLoading() {
  const submitBtn = document.getElementById('submitBtn');
  const btnText = submitBtn.querySelector('.btn-text');
  const btnLoading = submitBtn.querySelector('.btn-loading');
  
  submitBtn.disabled = false;
  btnText.style.display = 'inline';
  btnLoading.style.display = 'none';
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ —É–∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
if (localStorage.getItem('loggedIn') === 'true') {
  const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
  showNotification(`–í—ã —É–∂–µ –≤–æ—à–ª–∏ –∫–∞–∫ ${currentUser.firstName || currentUser.email}`, 'warning');
  setTimeout(() => {
    window.location.href = 'profile.html';
  }, 2000);
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥–∞
document.getElementById('login-form').addEventListener('submit', async function(e) {
  e.preventDefault();
  
  const email = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value;
  
  // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –æ—à–∏–±–∫–∏
  hideFieldError('email');
  hideFieldError('password');
  
  let isValid = true;
  
  if (!email) {
    showFieldError('email', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ email');
    isValid = false;
  } else if (!/\S+@\S+\.\S+/.test(email)) {
    showFieldError('email', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email');
    isValid = false;
  }
  
  if (!password) {
    showFieldError('password', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å');
    isValid = false;
  }
  
  if (!isValid) return;
  
  showLoading();
  
  try {
    const response = await fetch('http://localhost:3000/api/login', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ email, password })
    });
    
    const data = await response.json();
    
if (data.status === 'success') {
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  localStorage.setItem('loggedIn', 'true');
  localStorage.setItem('currentUser', JSON.stringify(data.user));
  
  showNotification(`–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${data.user.firstName}!`, 'success');
  setTimeout(() => {
    window.location.href = 'index.html';
  }, 2000);
}
  } catch (error) {
    showNotification('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É');
    console.error('–û—à–∏–±–∫–∞:', error);
  } finally {
    hideLoading();
  }
});

// –°–∫—Ä—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏ –ø—Ä–∏ –≤–≤–æ–¥–µ
document.querySelectorAll('input').forEach(input => {
  input.addEventListener('input', function() {
    hideFieldError(this.id);
  });
});

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ñ—É—Ç–µ—Ä–∞ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
function initFooterVisibility() {
  const footer = document.querySelector('.footer');
  if (!footer) return;
  
  let footerShown = false;

  function checkFooterVisibility() {
    const scrollPosition = window.scrollY + window.innerHeight;
    const documentHeight = document.documentElement.scrollHeight;
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ—É—Ç–µ—Ä –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–∫—Ä—É—Ç–∏–ª –¥–æ –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    if (scrollPosition >= documentHeight - 100 && !footerShown) {
      footer.classList.add('visible', 'slide-up');
      footerShown = true;
    } else if (scrollPosition < documentHeight - 300 && footerShown) {
      footer.classList.remove('visible', 'slide-up');
      footerShown = false;
    }
  }

  window.addEventListener('scroll', checkFooterVisibility);
  window.addEventListener('resize', checkFooterVisibility);
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  setTimeout(checkFooterVisibility, 100);
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', initFooterVisibility);
</script>
</body>
</html>