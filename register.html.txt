<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è | L-U-N-E-V</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/main.css">
</head>
<body>

<header class="header">
  <div class="header-container">
    <div class="header-left">
      <a href="index.html" class="logo">
        <img src="images/logo1.png" alt="L-U-N-E-V" class="logo-img">
      </a>
    </div>
    <div class="header-right">
      <nav class="nav">
        <a href="favorites.html">‚ù§Ô∏è –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</a>
        <a href="cart.html">üõí –ö–æ—Ä–∑–∏–Ω–∞</a>
        <a href="login.html" class="login-link">üë§ –í–æ–π—Ç–∏</a>
      </nav>
    </div>
  </div>
</header>

<div class="register-container">
  <h2>–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</h2>
  <form id="register-form">
    <div class="form-row">
      <div class="form-group">
        <label for="lastName">–§–∞–º–∏–ª–∏—è *</label>
        <input type="text" id="lastName" required>
        <div class="form-error" id="lastNameError"></div>
      </div>
      <div class="form-group">
        <label for="firstName">–ò–º—è *</label>
        <input type="text" id="firstName" required>
        <div class="form-error" id="firstNameError"></div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="middleName">–û—Ç—á–µ—Å—Ç–≤–æ</label>
      <input type="text" id="middleName">
    </div>
    
    <div class="form-group">
      <label for="email">Email *</label>
      <input type="email" id="email" placeholder="your@email.com" required>
      <div class="form-error" id="emailError"></div>
    </div>
    
    <div class="form-group">
      <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
      <input type="tel" id="phone" placeholder="+7 (XXX) XXX-XX-XX" required>
      <div class="form-error" id="phoneError"></div>
    </div>
    
    <div class="form-group">
      <label for="birthDate">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
      <input type="date" id="birthDate">
    </div>
    
    <div class="form-group">
      <label for="gender">–ü–æ–ª</label>
      <select id="gender">
        <option value="">–ù–µ —É–∫–∞–∑–∞–Ω–æ</option>
        <option value="male">–ú—É–∂—Å–∫–æ–π</option>
        <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
      </select>
    </div>
    
    <div class="form-group">
      <label for="password">–ü–∞—Ä–æ–ª—å *</label>
      <input type="password" id="password" required minlength="6">
      <div class="requirements">–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤</div>
      <div class="form-error" id="passwordError"></div>
    </div>
    
    <div class="form-group">
      <label for="confirmPassword">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å *</label>
      <input type="password" id="confirmPassword" required>
      <div class="form-error" id="confirmPasswordError"></div>
    </div>
    
    <div class="form-group">
      <label>
        <input type="checkbox" id="newsletter" checked>
        –ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö
      </label>
    </div>
    
    <button type="submit" class="register-btn" id="submitBtn">
      <span class="btn-text">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</span>
      <span class="btn-loading">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è...</span>
    </button>
  </form>
  
  <div class="auth-link">
    –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="login.html">–í–æ–π—Ç–∏</a>
  </div>
</div>

<footer class="footer">
  <div class="footer-content">
    <div class="footer-section">
      <h3>L-U-N-E-V</h3>
      <p>–ë—É–¥—É—â–µ–µ –ó–¥–µ—Å—å –∏ –°–µ–π—á–∞—Å. –°–∞–º—ã–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –≥–∞–¥–∂–µ—Ç—ã –¥–ª—è –≤–∞—à–µ–≥–æ –∫–æ–º—Ñ–æ—Ä—Ç–∞.</p>
      <div class="social-links">
        <a href="#">üìò VK</a>
        <a href="#">üì∑ Instagram</a>
        <a href="#">üê¶ Twitter</a>
        <a href="#">üìπ YouTube</a>
      </div>
    </div>
    
    <div class="footer-section">
      <h4>–ú–∞–≥–∞–∑–∏–Ω</h4>
      <ul>
        <li><a href="product-telephone.html">–°–º–∞—Ä—Ç—Ñ–æ–Ω—ã</a></li>
        <li><a href="product-consoles.html">–ò–≥—Ä–æ–≤—ã–µ –∫–æ–Ω—Å–æ–ª–∏</a></li>
        <li><a href="product-headphone.html">–ù–∞—É—à–Ω–∏–∫–∏</a></li>
        <li><a href="product-port-consoles.html">–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–Ω—Å–æ–ª–∏</a></li>
        <li><a href="product-washmashine.html">–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞</a></li>
      </ul>
    </div>
    
    <div class="footer-section">
      <h4>–ü–æ–º–æ—â—å</h4>
      <ul>
        <li><a href="help.html">–¶–µ–Ω—Ç—Ä –ø–æ–¥–¥–µ—Ä–∂–∫–∏</a></li>
        <li><a href="delivery.html">–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞</a></li>
        <li><a href="warranty.html">–ì–∞—Ä–∞–Ω—Ç–∏—è –∏ –≤–æ–∑–≤—Ä–∞—Ç</a></li>
        <li><a href="faq.html">–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</a></li>
        <li><a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
      </ul>
    </div>
    
    <div class="footer-section">
      <h4>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
      <div class="contact-info">
        <p>üìß Email: MR.ANDREW.BRAUNI@mamamia.ru</p>
        <p>üìû –¢–µ–ª–µ—Ñ–æ–Ω: +7 (914) 123-4-88</p>
        <p>üïí –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 9:00-21:00</p>
        <p>üìç –ê–¥—Ä–µ—Å: –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è, 42</p>
      </div>
    </div>
    
    <div class="footer-section">
      <h4>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h4>
      <div class="security-badges">
        <div>üîí SSL –∑–∞—â–∏—Ç–∞</div>
        <div>üí≥ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞</div>
        <div>üì¶ –ì–∞—Ä–∞–Ω—Ç–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏</div>
      </div>
    </div>
  </div>
  
  <div class="footer-bottom">
    <p>¬© 2025 L-U-N-E-V. –ë—É–¥—É—â–µ–µ –ó–¥–µ—Å—å –∏ –°–µ–π—á–∞—Å. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    <div class="footer-links">
      <a href="privacy.html">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
      <a href="terms.html">–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a>
      <a href="cookies.html">Cookies</a>
    </div>
  </div>
</footer>

<script>
// –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
function showNotification(message, type = 'error') {
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  notification.textContent = message;
  document.body.appendChild(notification);
  
  setTimeout(() => notification.classList.add('show'), 100);
  
  setTimeout(() => {
    notification.classList.remove('show');
    setTimeout(() => notification.remove(), 300);
  }, 5000);
}

// –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É –ø–æ–ª—è
function showFieldError(fieldId, message) {
  const field = document.getElementById(fieldId);
  const errorElement = document.getElementById(fieldId + 'Error');
  
  if (field && errorElement) {
    field.classList.add('error');
    errorElement.textContent = message;
    errorElement.style.display = 'block';
  }
}

// –°–∫—Ä—ã—Ç—å –æ—à–∏–±–∫—É –ø–æ–ª—è
function hideFieldError(fieldId) {
  const field = document.getElementById(fieldId);
  const errorElement = document.getElementById(fieldId + 'Error');
  
  if (field && errorElement) {
    field.classList.remove('error');
    errorElement.style.display = 'none';
  }
}

// –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏
function clearAllErrors() {
  const errorFields = ['lastName', 'firstName', 'email', 'phone', 'password', 'confirmPassword'];
  errorFields.forEach(field => hideFieldError(field));
}

// –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
function showLoading() {
  const submitBtn = document.getElementById('submitBtn');
  const btnText = submitBtn.querySelector('.btn-text');
  const btnLoading = submitBtn.querySelector('.btn-loading');
  
  submitBtn.disabled = true;
  btnText.style.display = 'none';
  btnLoading.style.display = 'inline';
}

// –°–∫—Ä—ã—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
function hideLoading() {
  const submitBtn = document.getElementById('submitBtn');
  const btnText = submitBtn.querySelector('.btn-text');
  const btnLoading = submitBtn.querySelector('.btn-loading');
  
  submitBtn.disabled = false;
  btnText.style.display = 'inline';
  btnLoading.style.display = 'none';
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
document.getElementById('register-form').addEventListener('submit', async function(e) {
  e.preventDefault();
  
  // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –æ—à–∏–±–∫–∏
  clearAllErrors();
  
  // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
  const userData = {
    email: document.getElementById('email').value.trim().toLowerCase(),
    password: document.getElementById('password').value,
    firstName: document.getElementById('firstName').value.trim(),
    lastName: document.getElementById('lastName').value.trim(),
    phone: document.getElementById('phone').value.trim(),
    middleName: document.getElementById('middleName').value.trim(),
    birthDate: document.getElementById('birthDate').value,
    gender: document.getElementById('gender').value,
    newsletter: document.getElementById('newsletter').checked
  };
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è
  let isValid = true;
  
  if (!userData.firstName) {
    showFieldError('firstName', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è');
    isValid = false;
  }
  
  if (!userData.lastName) {
    showFieldError('lastName', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é');
    isValid = false;
  }
  
  if (!userData.email) {
    showFieldError('email', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ email');
    isValid = false;
  } else if (!/\S+@\S+\.\S+/.test(userData.email)) {
    showFieldError('email', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email');
    isValid = false;
  }
  
  if (!userData.phone) {
    showFieldError('phone', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω');
    isValid = false;
  }
  
  if (!userData.password) {
    showFieldError('password', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å');
    isValid = false;
  } else if (userData.password.length < 6) {
    showFieldError('password', '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤');
    isValid = false;
  }
  
  if (userData.password !== document.getElementById('confirmPassword').value) {
    showFieldError('confirmPassword', '–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç');
    isValid = false;
  }
  
  if (!isValid) return;
  
  showLoading();
  
  try {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    const response = await fetch('http://localhost:3000/api/register', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(userData)
    });
    
    const data = await response.json();
    
    if (data.status === 'success') {
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º
      localStorage.setItem('loggedIn', 'true');
      localStorage.setItem('currentUser', JSON.stringify(data.user));
      
      showNotification(`–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${data.user.firstName}!`, 'success');
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 2000);
    } else {
      showNotification(data.error || '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏');
    }
  } catch (error) {
    showNotification('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É');
    console.error('–û—à–∏–±–∫–∞:', error);
  } finally {
    hideLoading();
  }
});

// –ú–∞—Å–∫–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
document.getElementById('phone').addEventListener('input', function(e) {
  let x = e.target.value.replace(/\D/g, '').match(/(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);
  e.target.value = '+7' + (x[2] ? ' (' + x[2] : '') + (x[3] ? ') ' + x[3] : '') + (x[4] ? '-' + x[4] : '') + (x[5] ? '-' + x[5] : '');
});

// –°–∫—Ä—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏ –ø—Ä–∏ –≤–≤–æ–¥–µ
document.querySelectorAll('input').forEach(input => {
  input.addEventListener('input', function() {
    hideFieldError(this.id);
  });
});

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ñ—É—Ç–µ—Ä–∞ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
function initFooterVisibility() {
  const footer = document.querySelector('.footer');
  if (!footer) return;
  
  let footerShown = false;

  function checkFooterVisibility() {
    const scrollPosition = window.scrollY + window.innerHeight;
    const documentHeight = document.documentElement.scrollHeight;
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ—É—Ç–µ—Ä –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–∫—Ä—É—Ç–∏–ª –¥–æ –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    if (scrollPosition >= documentHeight - 100 && !footerShown) {
      footer.classList.add('visible', 'slide-up');
      footerShown = true;
    } else if (scrollPosition < documentHeight - 300 && footerShown) {
      footer.classList.remove('visible', 'slide-up');
      footerShown = false;
    }
  }

  window.addEventListener('scroll', checkFooterVisibility);
  window.addEventListener('resize', checkFooterVisibility);
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  setTimeout(checkFooterVisibility, 100);
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', initFooterVisibility);
</script>
</body>
</html>